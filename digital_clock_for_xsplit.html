<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-control" content="no-store">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Digital Clock for XSplit</title>
  <style>
    /* Thiết kế tối giản, dễ tùy chỉnh */
    html,body{
      height:100%;
      margin:0;
      background:transparent;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .wrap{
      box-sizing:border-box;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:10px;
    }
    .clock{
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      font-weight:700;
      font-size:6vw; /* scalable with container */
      line-height:1;
      padding:12px 20px;
      border-radius:12px;
      background: rgba(255,255,255,0.05); /* nhẹ, có thể set thành transparent */
      color:#ff3b3b; /* màu đỏ chủ đạo — thay đổi nếu muốn */
      text-shadow: 0 2px 6px rgba(0,0,0,0.35);
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      min-width:220px;
      text-align:center;
    }
    .small{
      font-size:0.35em;
      display:block;
      font-weight:600;
      opacity:0.85;
      margin-top:6px;
    }
    /* Responsive caps */
    @media (min-width:1200px){ .clock{ font-size:60px; } }
    @media (max-width:420px){ .clock{ font-size:28px; padding:8px 12px; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div id="clock" class="clock" aria-live="polite">
      --:--:--
      <span id="zone" class="small"></span>
    </div>
  </div>

  <script>
    // Cấu hình:
    const use24Hour = true;        // true = 24h, false = 12h
    const showSeconds = true;      // hiển thị giây
    const transparentBackground = true; // nếu false, sẽ dùng nền mờ (CSS ở trên)
    // Nếu muốn cố định timezone, đặt timezoneOverride = 'Asia/Bangkok' hoặc null để dùng giờ hệ thống
    const timezoneOverride = null; // ví dụ: 'Asia/Bangkok' hoặc null

    // Áp dụng nền trong JS (tiện cho XSplit nếu cần nền trong suốt)
    if (transparentBackground) {
      document.body.style.background = "transparent";
      document.querySelector('.clock').style.background = "transparent";
      document.querySelector('.clock').style.boxShadow = "none";
      document.querySelector('.clock').style.textShadow = "0 1px 3px rgba(0,0,0,0.25)";
    }

    function pad(n){ return (n<10? '0':'') + n; }

    function formatTime(date){
      let h = date.getHours();
      let m = date.getMinutes();
      let s = date.getSeconds();
      let suffix = '';
      if (!use24Hour){
        suffix = h >= 12 ? ' PM' : ' AM';
        h = h % 12;
        if (h === 0) h = 12;
      }
      const timeStr = use24Hour
        ? pad(h) + ':' + pad(m) + (showSeconds ? (':' + pad(s)) : '')
        : pad(h) + ':' + pad(m) + (showSeconds ? (':' + pad(s)) : '') + suffix;
      return timeStr;
    }

    function update(){
      let now;
      if (timezoneOverride && typeof Intl !== 'undefined' && Intl.DateTimeFormat) {
        // Tạo time ở timezone bằng cách dùng toLocaleString và parse lại (workaround)
        try {
          const parts = new Intl.DateTimeFormat('en-US', {
            timeZone: timezoneOverride,
            hour12: !use24Hour,
            hour: '2-digit', minute: '2-digit', second: showSeconds ? '2-digit' : undefined
          }).formatToParts(new Date());
          let hh = parts.find(p=>p.type==='hour')?.value || '00';
          let mm = parts.find(p=>p.type==='minute')?.value || '00';
          let ss = parts.find(p=>p.type==='second')?.value || '00';
          now = new Date();
          now.setHours(parseInt(hh,10));
          now.setMinutes(parseInt(mm,10));
          now.setSeconds(parseInt(ss,10));
        } catch (e){
          now = new Date();
        }
      } else {
        now = new Date();
      }

      document.getElementById('clock').firstChild && document.getElementById('clock').firstChild.remove();
      const txt = document.createTextNode(formatTime(now));
      document.getElementById('clock').insertBefore(txt, document.getElementById('zone'));

      // Zone text
      const zoneEl = document.getElementById('zone');
      if (timezoneOverride){
        zoneEl.textContent = timezoneOverride;
      } else {
        // cố gắng lấy offset theo GMT
        const offset = -now.getTimezoneOffset()/60;
        zoneEl.textContent = 'GMT' + (offset >= 0 ? '+'+offset : offset);
      }
    }

    // Update mỗi 200ms để đảm bảo đồng hồ mượt
    setInterval(update, 200);
    update();

    // Prevent right-click context menu (optional - useful when embedding)
    document.addEventListener('contextmenu', function(e){ e.preventDefault(); }, false);
  </script>
</body>
</html>
