<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PHIẾU GỬI HÀNG</title>
  <style>
    body { font-family: Times New Roman, serif; margin: 0; background: #fff; }
 
    .wrap { max-width: 800px; margin: 0 auto; padding: 5px 40px 20px 40px;  }

    .head { display: flex; justify-content: space-between; align-items: center; }
    .head img { width: 100px; height: auto; }
    .head .title { text-align: center; flex: 1; }
    .head .title b { font-size: 16px; }
    .head .title u { display: block; margin-top: 4px; }

    h1 { text-align: center; margin: 24px 0 14px; font-size: 18px; font-weight: bold; }

    .info p { margin: 6px 0; font-size: 16px; line-height: 1.5; }
    .info b { font-weight: bold; }
    .info i { font-style: italic; }

    .confirm { margin-top: 40px; text-align: right; font-size: 16px; }
    .sign { margin-top: 60px; text-align: right; font-style: italic; }

    .actions {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 999;
    }
    .actions button {
      margin: 4px;
      padding: 8px 14px;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 6px;
      background: #f9f9f9;
    }
    @media print { .actions { display: none; } }
  </style>
</head>
<body>
  <div class="actions">
    <button onclick="window.print()">&#128424; In</button>
    <button onclick="exportPDF()">&#128196; Xu&#7845;t PDF</button>
  </div>

  <div class="wrap" id="voucher">
    <div class="head">
      <img src="https://i.ibb.co/TWw8vN7/5a60e014cea76af933b6.jpg" alt="Logo" />
      <div class="title">
        <b>NHAT GIANG STORE</b>
        <u>SN 729 Bà Triệu, P. Hạc Thành, Thanh hóa - ĐT: 0919050618</u>
      </div>
    </div>

    <h1>PHIẾU GỬI HÀNG</h1>

    <div class="info">
      <p>Người gửi: <b>ĐỖ THU HƯỜNG</b></p>
      <p>Địa chỉ: <b>SN 729 Bà Triệu, P. Hạc Thành, Thanh hóa - ĐT: 0919050618</b></p>
      <p>Điện thoại: <b>0919050618</b></p>
<br>
      <p>Người nhận: <b><span id="Hotenkh"></span></b></p>
      <p>Địa chỉ: <span id="Diachi"></span></p>
      <p>Điện thoại: <span id="sdt"></span></p>
     
    </div>

    <div class="foot">
      <p><b><i>---------------------------------------------------</i></b></p>
      <p><b><i>Xin cảm ơn và hẹn gặp lại!</i></b></p>
      <p><b><i>RẤT BIẾT ƠN KHI TIẾP NHẬN PHẢN HỒI CỦA QUÝ KHÁCH.</i></b></p>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    function exportPDF() {
      const element = document.getElementById("voucher");
      const opt = {
        margin: 0.5,
        filename: 'phieu-nhan-qua.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }

    // L&#7845;y d&#7919; li&#7879;u t&#7915; URL
    const qp = new URLSearchParams(location.search);
    const get = k => qp.get(k) || "";
    document.getElementById("Makh").textContent = get("Makh");
    document.getElementById("Hotenkh").textContent = get("tenkh");
    document.getElementById("Diachi").textContent = get("diachikh");
    document.getElementById("sdt").textContent = get("dienthoai");



    
    const total = parseFloat(get("total") || 0);
    document.getElementById("S&#7889; ti&#7873;n g&#7917;i").textContent = 
        new Intl.NumberFormat("vi-VN").format(total);
    
    document.getElementById("K&#7923; h&#7841;n").textContent = get("texttotal");
    document.getElementById("Lo&#7841;i quà t&#7863;ng").textContent = get("qua");

    // &#128276; T&#7921; &#273;&#7897;ng b&#7853;t Print View khi trang t&#7843;i xong
    window.onload = function() {
      window.print();
      // Sau khi in ho&#7863;c hu&#7927; in thì t&#7921; &#273;&#7897;ng &#273;óng tab
      window.onafterprint = function() {
        window.close();
      };
    };
  </script>
</body>

</html>
