<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PHI·∫æU G·ª¨I H√ÄNG</title>
  <style>
    body { font-family: Times New Roman, serif; margin: 0; background: #fff; }
 
    .wrap { max-width: 800px; margin: 0 auto; padding: 5px 40px 20px 40px;  }

    .head { display: flex; justify-content: space-between; align-items: center; }
    .head img { width: 100px; height: auto; }
    .head .title { text-align: center; flex: 1; }
    .head .title b { font-size: 16px; }
    .head .title u { display: block; margin-top: 4px; }

    h1 { text-align: center; margin: 24px 0 14px; font-size: 18px; font-weight: bold; }

    .info p { margin: 6px 0; font-size: 16px; line-height: 1.5; }
    .info b { font-weight: bold; }
    .info i { font-style: italic; }

    .confirm { margin-top: 40px; text-align: right; font-size: 16px; }
    .sign { margin-top: 60px; text-align: right; font-style: italic; }

    .actions {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 999;
    }
    .actions button {
      margin: 4px;
      padding: 8px 14px;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid #333;
      border-radius: 6px;
      background: #f9f9f9;
    }
    @media print { .actions { display: none; } }
  </style>
</head>
<body>
  <div class="actions">
    <button onclick="window.print()">üñ® In</button>
    <button onclick="exportPDF()">üìÑ Xu·∫•t PDF</button>
  </div>

  <div class="wrap" id="voucher">
    <div class="head">
      <img src="https://i.ibb.co/TWw8vN7/5a60e014cea76af933b6.jpg" alt="Logo" />
      <div class="title">
        <b>NHAT GIANG STORE</b>
        <u>SN 729 B√† Tri·ªáu, P. H·∫°c Th√†nh, t·ªânh Thanh H√≥a - ƒêT: 0919050618</u>
      </div>
    </div>

    <h1>PHI·∫æU G·ª¨I H√ÄNG</h1>

    <div class="info">
      <p>Ng∆∞·ªùi g·ª≠i: <b>ƒê·ªñ THU H∆Ø·ªúNG</b></p>
      <p>ƒê·ªãa ch·ªâ: <b>SN 729 B√† Tri·ªáu, P. H·∫°c Th√†nh, t·ªânh Thanh H√≥a</b></p>
      <p>ƒêi·ªán tho·∫°i: <b>0919050618</b></p>

      <p><b>Ng∆∞·ªùi nh·∫≠n:</b> <span id="hovaten"></span></p>
      <p><b>Ng∆∞·ªùi nh·∫≠n:</b> <span id="hovaten"></span></p>
      <p><b>Ng∆∞·ªùi nh·∫≠n:</b> <span id="hovaten"></span></p>
      
    </div>

    <div class="foot">
      <p><b><i>---------------------------------------------------</i></b></p>
      <p><b><i>Xin c·∫£m ∆°n v√† h·∫πn g·∫∑p l·∫°i!</i></b></p>
      <p><b><i>C·∫£m ∆°n khi ti·∫øp nh·∫≠n ph·∫£n h·ªìi c·ªßa qu√Ω kh√°ch.</i></b></p>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    function exportPDF() {
      const element = document.getElementById("voucher");
      const opt = {
        margin: 0.5,
        filename: 'phieu-nhan-qua.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }

    // L·∫•y d·ªØ li·ªáu t·ª´ URL
    const qp = new URLSearchParams(location.search);
    const get = k => qp.get(k) || "";
    document.getElementById("id").textContent = get("Makh");


    
    const total = parseFloat(get("total") || 0);
    document.getElementById("S·ªë ti·ªÅn g·ª≠i").textContent = 
        new Intl.NumberFormat("vi-VN").format(total);
    
    document.getElementById("K·ª≥ h·∫°n").textContent = get("texttotal");
    document.getElementById("Lo·∫°i qu√† t·∫∑ng").textContent = get("qua");

    // üîî T·ª± ƒë·ªông b·∫≠t Print View khi trang t·∫£i xong
    window.onload = function() {
      window.print();
      // Sau khi in ho·∫∑c hu·ª∑ in th√¨ t·ª± ƒë·ªông ƒë√≥ng tab
      window.onafterprint = function() {
        window.close();
      };
    };
  </script>
</body>
</html>
