<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Đồng hồ - no scroll (for XSplit)</title>
  <style>
    /* ===== Reset & disable scrollbars ===== */
    html,body{
      height:100%;
      width:100%;
      margin:0;
      padding:0;
      overflow:hidden !important; /* KHÔNG HIỂN THỊ thanh cuộn */
      -webkit-overflow-scrolling: touch;
      background: transparent; /* để XSplit có thể set transparency */
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* ===== Container centered and scales ===== */
    .wrap{
      box-sizing:border-box;
      height:100%;
      width:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:6px;
    }

    /* ===== Clock styling (responsive) ===== */
    .clock{
      display:inline-block;
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      font-weight:700;
      line-height:1;
      text-align:center;
      padding:10px 18px;
      border-radius:10px;
      min-width:160px;
      transform-origin:center;
      /* default visual - change color if you want */
      color:#ff3b3b;
      background: rgba(0,0,0,0.10); /* set to transparent if undesired */
      box-shadow: 0 6px 16px rgba(0,0,0,0.18);
    }

    /* time text responsive sizing using viewport width but clamped */
    .time {
      font-size: calc(18px + 5vw);
      letter-spacing: 0.02em;
      display:block;
    }
    .sub {
      font-size: calc(10px + 0.8vw);
      opacity:0.9;
      margin-top:6px;
      display:block;
      font-weight:600;
    }

    /* force no scrollbars on any child elements too */
    * { box-sizing:border-box; overflow:visible; }

    /* small-screen tweaks */
    @media (max-width:420px){
      .time { font-size: 28px; }
      .sub  { font-size: 12px; }
      .clock{ padding:8px 12px; border-radius:8px;}
    }
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <div class="clock" id="clock" role="img" aria-label="Đồng hồ">
      <span class="time" id="time">--:--:--</span>
      <span class="sub" id="sub">GMT+7 • 24h</span>
    </div>
  </div>

  <script>
    // ---------- Config ----------
    const use24Hour = true;         // true = 24h, false = 12h
    const showSeconds = true;       // show seconds
    const transparentBackground = true; // if true, remove background box
    const timezoneOverride = 'Asia/Bangkok'; // set to null to use system timezone

    // Apply transparent background if requested
    if (transparentBackground) {
      const el = document.getElementById('clock');
      el.style.background = 'transparent';
      el.style.boxShadow = 'none';
    }

    function pad(n){ return n < 10 ? '0' + n : '' + n; }

    function getTimePartsForTZ(tz) {
      try {
        const opts = { timeZone: tz, hour12: !use24Hour, hour: '2-digit', minute: '2-digit' };
        if (showSeconds) opts.second = '2-digit';
        const parts = new Intl.DateTimeFormat('en-US', opts).formatToParts(new Date());
        const hh = parts.find(p=>p.type==='hour')?.value || '00';
        const mm = parts.find(p=>p.type==='minute')?.value || '00';
        const ss = parts.find(p=>p.type==='second')?.value || '00';
        const dayPeriod = parts.find(p=>p.type==='dayPeriod')?.value || '';
        return {hh,mm,ss,dayPeriod};
      } catch(e){
        return null;
      }
    }

    function formatTime(date) {
      let h = date.getHours();
      let m = date.getMinutes();
      let s = date.getSeconds();
      let suffix = '';
      if (!use24Hour) {
        suffix = h >= 12 ? ' PM' : ' AM';
        h = h % 12;
        if (h === 0) h = 12;
      }
      return (use24Hour ? pad(h) : pad(h)) + ':' + pad(m) + (showSeconds ? (':'+pad(s)) : '') + (use24Hour ? '' : suffix);
    }

    function updateClock(){
      let timeStr = '--:--:--';
      let zoneText = 'GMT' + (-(new Date()).getTimezoneOffset()/60 >= 0 ? '+' + (-(new Date()).getTimezoneOffset()/60) : (-(new Date()).getTimezoneOffset()/60));
      if (timezoneOverride && typeof Intl !== 'undefined' && Intl.DateTimeFormat) {
        const parts = getTimePartsForTZ(timezoneOverride);
        if (parts){
          timeStr = (use24Hour ? parts.hh : parts.hh) + ':' + parts.mm + (showSeconds ? (':'+parts.ss) : '') + (use24Hour ? '' : (' ' + parts.dayPeriod));
          zoneText = timezoneOverride + ' • ' + zoneText;
        } else {
          timeStr = formatTime(new Date());
        }
      } else {
        timeStr = formatTime(new Date());
      }

      document.getElementById('time').textContent = timeStr;
      document.getElementById('sub').textContent = zoneText + (use24Hour ? ' • 24h' : ' • 12h');
    }

    // Update at 200ms interval to keep seconds smooth when shown
    setInterval(updateClock, 200);
    updateClock();

    // Prevent context menu (optional)
    document.addEventListener('contextmenu', e => e.preventDefault());
    // Ensure the wrap fills exactly and no scrollbars appear even if XSplit resizes
    window.addEventListener('resize', () => {
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';
    }, {passive:true});
  </script>
</body>
</html>
