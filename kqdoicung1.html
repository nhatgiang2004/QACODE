<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Kết quả Bán Kết - CLB Hướng Đỏ</title>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@600;700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    padding: 0;
    background: transparent;
    font-family: 'Lexend', sans-serif;
    font-weight: 700;
  }
  table {
    border-collapse: collapse;
    width: 470px;
    font-size: 14px;
  }
  td {
    padding: 4px 6px;
    vertical-align: middle;
  }
  .logo {
    width: 60px;
    text-align: center;
  }
  .logo img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
  }
  .team {
    background: #555;
    color: white;
    text-transform: uppercase;
    text-align: left;
    font-size: 14px;
  }
  .score {
    background: #FFD700;
    color: #000;
    font-size: 20px;
    text-align: center;
    font-weight: 900;
    width: 45px;
  }
  .dot {
    background: #FFD700;
    text-align: center;
    width: 45px;
  }
  .dot span {
    display: inline-block;
    width: 18px;
    height: 18px;
    background: red;
    border-radius: 50%;
  }
  .footer td {
    background: #2E8B57;
    color: #fff;
    text-align: center;
    font-size: 16px;
    padding: 6px;
    text-transform: uppercase;
  }
</style>
</head>
<body>
  <div id="table">⏳ Đang tải dữ liệu...</div>

  <script>
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/17l3xrP5q_5miTrFEsp5VFU880oS9Kx6lOe2qfSEBwQQ/gviz/tq?sheet=HIENTHI1';

    async function fetchCSV() {
      try {
        const res = await fetch(sheetURL);
        const text = await res.text();
        const rows = text.trim().split('\n').map(r => r.split(','));

        renderTable(rows);
      } catch (e) {
        document.getElementById('table').innerHTML = "❌ Lỗi tải dữ liệu";
      }
    }

    function renderTable(rows) {
      if (!rows || rows.length < 3) {
        document.getElementById('table').innerHTML = "⚠️ Không có dữ liệu hiển thị";
        return;
      }

      // Giả định:
      // Row 0: đội 1, Row 1: đội 2, Row 2: vòng đấu
      const team1 = rows[0][1] || "";
      const score1 = rows[0][2] || "";
      const team2 = rows[1][1] || "";
      const score2 = rows[1][2] || "";
      const round = rows[2][1] || "ĐANG CẬP NHẬT";

      let html = `
      <table>
        <tr>
          <td class="logo" rowspan="2">
            <img src="https://i.ibb.co/XwPyvS5/1-Logo-100358.jpg">
          </td>
          <td class="team">${team1}</td>
          <td class="score">${score1}</td>
          <td class="dot"></td>
        </tr>
        <tr>
          <td class="team">${team2}</td>
          <td class="score">${score2}</td>
          <td class="dot"><span></span></td>
        </tr>
        <tr class="footer">
          <td colspan="4">${round}</td>
        </tr>
      </table>`;

      document.getElementById('table').innerHTML = html;
    }

    fetchCSV();
    setInterval(fetchCSV, 5000);
  </script>
</body>
</html>
